# Maintainer: Your Name <youremail@domain.com>
pkgname=openmc
pkgver=0.13.2
pkgrel=1
pkgdesc="The OpenMC project aims to provide a fully-featured Monte Carlo particle 
		 transport code based on modern methods."
arch=('any')
url="https://docs.openmc.org/en/develop/"
license=('MIT')

depends=(
	python-lxml
	python-scipy
	python-pandas
	python-matplotlib
	python-uncertainties
	embree
	libxrender 
	libxcursor 
	libxft 
	libxinerama 
	freecad 
	glu
	# include once actually available
	# DAGMC-git
	# nuclear data
)
makedepends=(
    cmake
    git
    python
	python-numpy
	python-setuptools
)

provides=("${pkgname%-pkgver}")
conflicts=(
	openmc-git
	)

build() {
    sudo pacman --noconfirm -S python-lxml \
                               python-scipy \
                               python-pandas \
                               python-matplotlib \
                               python-uncertainties \
                               embree \
                               libxrender \
                               libxcursor \
                               libxft \
                               libxinerama \
                               freecad \
                               glu
    pip install h5py CAD_to_OpenMC
    cd $srcdir/$pkgname
    mkdir build && cd build
    cmake -DOPENMC_USE_DAGMC=ON \
          -DDAGMC_ROOT=/opt/dagmc \
          -DOPENMC_USE_MPI=ON \
          -DHDF5_PREFER_PARALLEL=ON ..
    sudo make
}

source=('https://github.com/openmc-dev/openmc/archive/refs/tags/v0.13.2.tar.gz')
md5sums=('SKIP')

# Please refer to the 'USING VCS SOURCES' section of the PKGBUILD man page for
# a description of each element in the source array.

